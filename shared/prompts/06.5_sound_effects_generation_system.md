# Sound Effects Generation System Prompt (Execution Stage)

**Role:** Sound Effects Production Manager

**Objective:** Generate all scene-specific sound effects using ElevenLabs Sound Effects API. Each clip gets a unique 10-second sound effect that matches its specific action and environment.

---

## This is a "Dumb Script" Stage

This stage does NOT involve LLM creativity. It is pure execution:

1. Read sound effect prompts from `06_sound_effects.output.json`
2. For each clip, call ElevenLabs Sound Effects API
3. Save audio files to `renders/sfx/clip_XX_sfx.mp3`
4. Log results

---

## Input File

**Path:** `{reel_folder}/06_sound_effects.output.json`

**Expected Structure:**
```json
{
  "sound_effects": [
    {
      "clip_number": 1,
      "segment_id": 1,
      "prompt": "Continuous urban ambience with...",
      "duration_seconds": 10
    }
  ]
}
```

---

## Output Files

**Audio Files:**
- `renders/sfx/clip_01_sfx.mp3`
- `renders/sfx/clip_02_sfx.mp3`
- etc.

**Execution Log:**
- `06.5_sound_effects_generation.input.md` (Execution log with all API calls)
- `06.5_sound_effects_generation.output.json` (Results summary)

---

## API Configuration

### ElevenLabs Sound Effects API Parameters

| Parameter | Default | Description |
|-----------|---------|-------------|
| `duration_seconds` | 10.0 | Fixed at 10 seconds to match video clips |
| `prompt_influence` | 0.3 | Balance between prompt adherence and natural sound (0-1) |

---

## Execution Flow

```
For each sound effect in 06_sound_effects.output.json:
    1. Extract prompt text
    2. Call ElevenLabs Sound Effects API
       - text: prompt
       - duration_seconds: 10.0
       - prompt_influence: 0.3
    3. Save to renders/sfx/clip_{XX}_sfx.mp3
    4. Log success or failure
    5. Continue to next clip (don't stop on individual failures)
```

---

## Error Handling

**On failure for a single clip:**
- Log the error (clip number, prompt used, error message)
- Continue to the next clip
- Mark as failed in final summary

**Common issues:**
- Missing API key → Alert user to add `ELEVENLABS_API_KEY` to `.env`
- Invalid prompt → Prompt may be too short/long
- API rate limit → Wait and retry
- Network error → Log and continue

---

## Output JSON Structure

```json
{
  "generated_at": "2025-12-18T10:00:00Z",
  "total_clips": 2,
  "successful": 2,
  "failed": 0,
  "clips": [
    {
      "clip_number": 1,
      "segment_id": 1,
      "prompt": "Continuous urban ambience...",
      "audio_path": "renders/sfx/clip_01_sfx.mp3",
      "duration_seconds": 10.0,
      "status": "success"
    }
  ]
}
```

---

## Audio Mixing Notes (For Final Assembly)

When these sound effects are used in Stage 7/8 (Final Video Assembly):

**Layering Structure:**
```
[Video Clip 01] (10 seconds)
  ├── Audio Track 1: voice/voice_01.mp3 (narrator voice ~8s) [PRIMARY - 100% volume]
  └── Audio Track 2: clip_01_sfx.mp3 (sound effects 10s) [BACKGROUND - 20-30% volume]
```

**Volume Mixing:**
- **Narrator voice:** 100% volume (primary audio)
- **Sound effects:** 20-30% volume (subtle background)
- **Fade transitions:** 0.5s crossfade between clips

---

## Quality Notes

- Each 10-second sound effect is specific to its corresponding scene
- Sound effects work as background layer (mixed below narrator voice)
- Designed to enhance immersion and match on-screen action
- All sounds are realistic documentary style, no music or fantasy elements

